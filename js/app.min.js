var lives=4,Enemy=function(x,y){this.sprite="images/enemy-bug.png",this.x=x,this.y=y};Enemy.prototype.update=function(dt){this.speed=Math.floor(520*Math.random()),this.x+=this.speed*dt,this.x>550&&(this.x=-100,this.speed=Math.floor(520*Math.random())),this.x<player.x+30&&this.x+30>player.x&&this.y<player.y+50&&this.y+50>player.y&&(player.lives--,player.lives<1&&player.loose(),player.renderLives(),player.reset())},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Player=function(){this.x=200,this.y=400,this.sprite="images/char-pink-girl.png",this.score=0,this.lives=lives};Player.prototype.update=function(){player.y<72&&(this.score+=10,player.reset())},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.renderLives=function(){for(var i=0;i<this.lives;i++){var heartWidth=30,heartHeight=51;ctx.drawImage(Resources.get("images/Heart.png"),30*i,0,30,51)}},Player.prototype.renderScore=function(){ctx.font="20px Comic Sans MS",ctx.fillStyle="black",ctx.textAlign="right",ctx.fillText("Score: "+player.score,500,30)},Player.prototype.handleInput=function(direction){"up"==direction&&this.y>-10&&(this.y-=82),"down"==direction&&this.y<400&&(this.y+=82),"left"==direction&&this.x>0&&(this.x-=100),"right"==direction&&this.x<400&&(this.x+=100)},Player.prototype.reset=function(){this.x=200,this.y=400},Player.prototype.loose=function(){alert("Game Over"),this.lives=4,this.score=0};var enemy1=new Enemy(50,140),enemy2=new Enemy(150,60),enemy3=new Enemy(250,230),allEnemies=[enemy1,enemy2,enemy3],player=new Player;document.addEventListener("keyup",function(e){var allowedKeys={37:"left",38:"up",39:"right",40:"down"};player.handleInput(allowedKeys[e.keyCode])});